---
interface Props {
    desktopImage: string; // ç”µè„‘ç«¯å›¾ç‰‡è·¯å¾„
    mobileImage: string;  // æ‰‹æœºç«¯å›¾ç‰‡è·¯å¾„
    alt: string;          // å›¾ç‰‡çš„ Alt æ–‡æœ¬
    height?: string;      // å¯é€‰ï¼šè®¾ç½®æ¨ªå¹…é«˜åº¦ (ä¾‹å¦‚ "300px", "50vh")
}

const { desktopImage, mobileImage, alt, height = '400px' } = Astro.props; // é»˜è®¤é«˜åº¦ 400px
---

<section class="full-width-banner" style={`--banner-height: ${height};`}>

    <div class="banner-inner">
        <picture>
            <source srcset={mobileImage} media="(max-width: 768px)">
            <img
                src={desktopImage}
                alt={alt}
                class="banner-image"
                loading="lazy"
                decoding="async"
            >
        </picture>
    </div>
</section>

<style>
/* ------------------------------------- */
/* 1. æ¨¡å—å®¹å™¨åŸºç¡€æ ·å¼ */
/* ------------------------------------- */
.full-width-banner {
    /* å…¨å®½ hack */
    width: 100vw;
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    z-index: 1;

    /* ç”µè„‘ç«¯ä¿æŒå›ºå®šé«˜åº¦ */
    height: var(--banner-height);

    overflow: hidden;
    background-color: #f0f0f0;

    /* æ€§èƒ½ä¼˜åŒ– */
    content-visibility: auto;
    contain: layout style;
}

.banner-inner {
    width: 100%;
    height: 100%;
}

/* ç”µè„‘ç«¯é»˜è®¤æ ·å¼ */
.banner-image {
    width: 100%;
    height: 100%;
    object-fit: cover; /* ç”µè„‘ç«¯ä¿æŒè£å‰ªå¡«å…… */
    display: block;
}

/* ------------------------------------- */
/* 2. å“åº”å¼è°ƒæ•´ (æ‰‹æœºç«¯ - å…¨å®½ä¸”ä¸è£å‰ª) */
/* ------------------------------------- */

@media (max-width: 768px) {
    .full-width-banner {
        /* ğŸš€ å…³é”® 1: ç§»é™¤å›ºå®šé«˜åº¦ï¼Œå…è®¸æ¨ªå¹…é«˜åº¦ç”±å›¾ç‰‡å†…å®¹å†³å®š */
        height: auto;
        padding: 0; /* ç¡®ä¿æ²¡æœ‰å‚ç›´å’Œæ°´å¹³è¾¹è· */
        max-height: none; /* ç§»é™¤ max-height é™åˆ¶ */

        /* ç§»é™¤ flex å¸ƒå±€ï¼Œç®€åŒ–ç»“æ„ */
        display: block;
    }

    .banner-inner {
        width: 100%;
        /* ğŸš€ å…³é”® 2: é«˜åº¦è‡ªé€‚åº” */
        height: auto;
        max-width: none; /* ç§»é™¤ max-width é™åˆ¶ï¼Œç¡®ä¿å…¨å®½ */
    }

    .banner-image {
        /* ğŸš€ å…³é”® 3: ä½¿ç”¨ contain ä¿è¯å›¾ç‰‡ä¸è¢«è£å‰ªï¼Œä¿æŒåŸå›¾æ¯”ä¾‹ */
        object-fit: contain;
        /* å…³é”® 4: ç¡®ä¿é«˜åº¦ autoï¼Œå®½åº¦ 100% */
        height: auto;
        width: 100%;
    }
}
</style>